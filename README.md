# Allure Service

–≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Allure API. –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø—É—Å–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–æ–≤ –∏ –∏—Ö —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.

## üìå –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–∏–∂–∞–π—à–µ–º –∑–∞–ø—É—Å–∫–µ —Ç–µ—Å—Ç–æ–≤ –ø–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-–æ—Ç—á–µ—Ç–∞ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF-–æ—Ç—á–µ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —Å –±—ç–∫–µ–Ω–¥–∞.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—à–∏–±–æ–∫.
- –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–Ø–∑—ã–∫**: Go
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Fiber (gofiber.io)
- **HTTP-–∫–ª–∏–µ–Ω—Ç**: resty (go-resty/resty)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: zerolog
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: godotenv
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: testify
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
‚îú‚îÄ‚îÄ cmd/                     # –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ config/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ config.go            # –õ–æ–≥–∏–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ internal/                # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ adapter/             # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å API Allure
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ allure-client.go # HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Allure API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.go        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ handler/             # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handlers.go      # –û—Å–Ω–æ–≤–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ service/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ allure_service.go # Allure-—Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ test/                    # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ client_test.go       # –¢–µ—Å—Ç HTTP-–∫–ª–∏–µ–Ω—Ç–∞ Allure
‚îÇ   ‚îú‚îÄ‚îÄ config_test.go       # –¢–µ—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ handler_test.go      # –¢–µ—Å—Ç HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ integration_test.go  # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ service_test.go      # –¢–µ—Å—Ç —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è
‚îú‚îÄ‚îÄ .env                     # –§–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore               # –§–∞–π–ª –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Git
‚îú‚îÄ‚îÄ Dockerfile               # Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ go.mod                   # –§–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Go
‚îú‚îÄ‚îÄ go.sum                   # –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ README.md                # –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
```env
SERVER_PORT=8080
ALLURE_BASE_URL=https://allure.example.com
ALLURE_API_URL=/api/
ALLURE_API_TOKEN=your_api_token
ALLURE_PROJECT_ID=your_project_id
```

### üèÉ‚Äç‚ôÇÔ∏è –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```sh
go run cmd/main.go
```

### üê≥ –ó–∞–ø—É—Å–∫ –≤ Docker
```sh
docker build -t allure-service .
docker run -p 8080:8080 --env-file .env allure-service
```

## üõ† –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
### ‚úÖ –ó–∞–ø—É—Å–∫ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤
```sh
go test ./test/... -coverpkg=./... -coverprofile=./coverage/coverage.out
```

### üìä –ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏
```sh
go tool cover -func=./coverage/coverage.out
```

### üèÜ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML-–æ—Ç—á–µ—Ç–∞
```sh
go tool cover -html=./coverage/coverage.out -o ./coverage/report.html
```

## üìÑ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
| –ú–µ—Ç–æ–¥  | URL                          | –û–ø–∏—Å–∞–Ω–∏–µ                               |
|--------|------------------------------|----------------------------------------|
| GET    | `/next-launch?after=<date>`  | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤   |
| POST   | `/export/pdf/:id`            | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-–æ—Ç—á–µ—Ç–∞ –ø–æ —Ç–µ—Å—Ç—É         |
| GET    | `/export/pdf/download/:id`   | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF-–æ—Ç—á–µ—Ç–∞                 |

## ‚ú® –ê–≤—Ç–æ—Ä—ã
- **–í–∏–∫—Ç–æ—Ä–∏—è –ü–∏–ª–∏–ø–µ–π–∫–æ** ‚Äî –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

